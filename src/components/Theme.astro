---
import { Image } from 'astro:assets';

import ledOff from '../images/theme/LedOff.svg';
import ledOn from '../images/theme/LedOn.svg';
---

<Image src={ledOff} alt='Theme selector' width={30} height={30} id='themeToggle' />

<style>
img {
  cursor: pointer;
  transition: transform 0.2s ease;
}

img:active {
  transform: scale(0.85);
}
</style>

<script is:inline>
  const toggleButton = document.getElementById('themeToggle');
  const currentTheme = localStorage.getItem('theme');

  if (currentTheme) {
    document.documentElement.setAttribute('data-theme', currentTheme);
  } else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
    document.documentElement.setAttribute('data-theme', 'dark');
  }

  toggleButton.addEventListener('click', function() {
    let theme = document.documentElement.getAttribute('data-theme');
    if (theme === 'dark') {
      document.documentElement.setAttribute('data-theme', 'light');
      localStorage.setItem('theme', 'light');
    } else {
      document.documentElement.setAttribute('data-theme', 'dark');
      localStorage.setItem('theme', 'dark');
    }
  });
</script>
